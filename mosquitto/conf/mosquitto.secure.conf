# Lưu retained/messages giữa các lần khởi động
persistence true
persistence_location /mosquitto/data/

# Log
log_dest stdout
log_type error warning notice information

# MQTT TCP
listener 1883
allow_anonymous false
password_file /mosquitto/passwd

# (Tuỳ chọn) ACL theo topic (nếu dùng nhiều user/tenant)
# acl_file /mosquitto/acl

# MQTT over WebSockets (cho client trong trình duyệt, hoặc qua reverse proxy)
listener 9001
protocol websockets

# Chống flood/giới hạn cơ bản
max_inflight_messages 20
message_size_limit 1048576   # 1MB
